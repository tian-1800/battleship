(()=>{"use strict";const r=(r,t)=>{const e=(r,e)=>!!t.receiveAttack(r,e);return{turn:void 0,isHuman:r,play:e,computerPlay:()=>{const r=Math.floor(10*Math.random()),o=t.shootingBoard[r].filter((r=>999!==r)),i=o.length,n=o[Math.floor(Math.random()*i)];e(r,n),t.gridBoard[r][n].click()}}},t=r=>{const t=10,e=Array.from(Array(t),(()=>Array.from(Array(t).keys()))),o=Array.from(Array(t),(()=>new Array(t))),i=Array.from(Array(t),(()=>new Array(t))),n=(r,t,e)=>{const{length:i}=r,[n,a]=t;if("horizontal"===e)for(let t=n;t<n+i;t+=1)o[t][a]={ship:r,position:t-n};else if("vertical"===e)for(let t=a;t<a+i;t+=1)o[n][t]={ship:r,position:t-a}};return{shipBoard:o,shootingBoard:e,gridBoard:i,deployShip:n,deployFleet:(t,e)=>{r.forEach((o=>{const i=r.indexOf(o);n(o,t[i],e)}))},receiveAttack:(r,t)=>{if(999===e[r][t])return!1;if(e[r][t]=999,o[r][t]){const{ship:e,position:i}=o[r][t];e.hit(i)}return!0},isFleetSunk:()=>!!r.every((r=>r.isSunk()))}},e=r=>{const t=r,e=Array(t).fill(!1);return{length:t,hit:r=>{e[r]=!0},isSunk:()=>e.every((r=>!0===r))}},o=(r,t,e,o,i,n)=>{r.addEventListener("click",(()=>{t.turn&&(t.play(e,o)&&n(),i.shipBoard[e][o]?(r.classList.remove("black"),r.classList.add("hit")):r.classList.add("empty-hit"))}))},i=(r,t,e,i)=>{for(;r.firstChild;)r.removeChild(r.firstChild);for(let n=0;n<10;n+=1)for(let a=0;a<10;a+=1){const s=document.createElement("div");t.shipBoard[n][a]&&s.classList.add("black"),o(s,e,n,a,t,i),r.appendChild(s);const{gridBoard:l}=t;l[n][a]=s}},n=[e(2),e(3),e(3),e(4),e(5)],[a,s]=[t(n),t(n)],[l,d]=[r(!0,s),r(!1,a)];a.deployFleet([[1,3],[2,5],[4,3],[5,6],[2,8]],"horizontal"),s.deployFleet([[1,3],[2,5],[4,3],[5,6],[2,8]],"horizontal");const[c,h]=document.getElementsByClassName("grid-container"),u=()=>{l.turn=!l.turn,d.turn=!d.turn,d.turn&&(d.computerPlay(),l.turn=!l.turn,d.turn=!d.turn)};i(c,a,d,u),i(h,s,l,u),l.turn=!0})();